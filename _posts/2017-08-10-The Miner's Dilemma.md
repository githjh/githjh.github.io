---
layout: post
title: The Minner's Dilemma
categories: others
---

### 초록

공개 분산 시스템은 참가자들에게 작업 증명을 제시하고 참여를 위한 보상을 요구함으로써 안전할 수 있다. Bitcoin 디지털 통화는 거의 모든 최신 디지털 통화 및 관련 서비스에서 채택되는 이 메커니즘을 도입했다. 

자연스러운 과정으로서 이런 시스템의 참가자들이 회원으로 하여금 그들의 컴퓨팅 파워를 모으고 보상을 공유하는 풀을 형성하게 한다. Bitcoin의 경험에 따르면 가장 큰 풀이 자주 열려있어 누구나 가입 할 수 있다. 일원이 겉으로 보기에는 합류하여 채굴하는 척하며 공개 된 풀을 방해 할 수는 있지만, 그 작업 증명 과정을 결코 공유 할 수 없다는 것은 오래 전부터 알려져 왔다. 풀은 수익을 공격자와 공유하므로 참여자별로 수익이 적어지게 된다. 

우리는 이 풀의 참가자들의 일부를 사용하여 다른 수영장에 침투하여 그러한 공격을 수행하는 게임을 정의하고 분석한다. 임의의 수의 풀이있을 때, 풀의 공격은 내쉬 균형이 아니다. 두 개의 풀 또는 동일한 수의 풀이있는 경우 풀이 서로를 공격하는 비극을 구성하는 평형이 존재하며 공격을받지 않은 경우에는 얻을 수있는 것보다 적게 받는다. 

2 개의 풀에 대한 공격 여부는 마이너의 딜레마, 반복되는 죄수의 딜레마의 사례이다. 이 게임은 공격하는 것을 선택하지 않는 활성 Bitcoin 풀에 의해 매일 수행된다. 이 균형이 깨지면 열린 풀의 수익이 줄어들어 참가자들에게 매력을 느끼지 못할 수 있다.

### 인트로

Bitcoin [18]은 2014 년 11 월 현재 시가 총액 45 억 달러를 수용하는 디지털 화폐로 [24], [7] 인정을 받고 있다 [6]. Bitcoin의 보안은 강력한 인센티브 시스템에서 비롯된다. 참가자는 비용이 많이드는 작업 증명을 제공해야하며, 노력에 따라 보상을 받는다. 이 아키텍처는 안정적이고 확장 성이 입증되었으며, 대부분의 최신 디지털 통화 및 관련 서비스에서 사용된다. [16], [10], [17], [19]. 우리의 결과는 이러한 모든 인센티브 시스템에 적용되지만, Bitcoin 용어 및 예제는 능동적 인 저명한 프로토 타입 역할을하기 때문에 사용한다. 

Bitcoin은 블록 체인이라는 데이터 구조로 인센티브 시스템을 구현한다. 블록 체인은 시스템의 모든 거래 처리를 직렬화 한 것이다. 개방형 분산 시스템에 의해 유지 관리되는 단일 글로벌 원장이다. 누구나 개방형 시스템에 가입하고 블록 체인을 유지 관리 할 수 ​​있으므로 Bitcoin은 공격을 방지하기 위해 작업 증명 메커니즘을 사용한다. 참여를 위해서는 상당한 컴퓨팅 리소스가 필요하다. 어떤 이가 작업 증명을 통해 충분한 자원을 발휘했다는 것을 증명하는 참가자는 블록을 생성하여 프로토콜을 단계적으로 수행 할 수 있다. 참가자들은 새로 작성한 비트 코인 (Bitcoins)을 통해 보상을받습니다. 블록을 만드는 프로세스를 마이닝이라고하며 참가자는 마이너라고 한다

보상을 얻기 위해, 많은 광부가 블록을 생성하려고 한다. 시스템은 블록 생성의 어려움(difficulty)을 자동으로 조정하여 한 블록이 블록 체인에 매 10 분마다 추가 된다. 이것은 각 광부가 거의 블록을 생성하지 않는다는 것을 의미 한다. 수익이 예상보다 좋을지라도, 마이너는 블록을 만들고 실제 Bitcoins를 벌기 위해 오랜 기간 동안 기다려야 할 수도 있다. 따라서 마이너는 광산 채굴장을 구성하여 모든 구성원이 동시에 광산을 채굴하고 그 중 하나가 블록을 만들 때마다 수익을 공유한다. 

풀은 일반적으로 풀 관리자와 마이너 집단으로 구현됩니다. 풀 관리자는 Bitcoin 시스템을 단일 광부로 합친다. 작업 증명을 생성하는 대신 광부에게 작업을 위탁한다. 마이너의 노력을 평가하기 위해 풀 관리자는 작업의 부분 증명(partial proof of work)을 받아들이고 부분적인 작업 증명을 제출하는 비율에 따라 각 광부의 파워을 추정한다. 마이너가 작업 증명을 생성하면 풀 관리자에게 전송하여 Bitcoin 시스템에이 작업 증명을 배포한다. 따라서 풀 관리자는 블록의 전체 수익을 얻고 구성원 전원에 따라 공정하게 분배한다. 대부분의 풀은 공개되어있어 공용 인터넷 인터페이스를 사용하여 광부가 참여할 수 있다.

그런 공개 풀은 고전적인 블록 withholding 공격을 받기 쉽다 [22]. 여기서 광부는 풀 관리자에게 부분적으로 만 작업 증명을 보내고 완전한 작업 증명을 버린다. 풀로 보내지는 작업의 부분적인 증명으로 인해, 광부는 일반 풀 회원으로 간주되며 풀은 그 파워를 추정 할 수 있다. 따라서 공격자는 다른 풀 구성원이 얻은 수익을 공유하지만 기여하지는 않는다. 이렇게 행동하는 것은 다른 회원의 수익뿐만 아니라 자신의 수입도 줄인다. Bitcoin 프로토콜, 풀 및 고전 블록 원천 징수 공격에 대한 배경 지식을 섹션 II에서 제공하고 섹션 III에서 모델을 지정한다. 

이 논문에서는 풀 간의 BWH공격(block withholding attack)을 분석한다. BWH 공격을 사용하는 풀은 희생자 풀에 정기적 인 광부로 등록한다. 피해자 풀에서 작업을 전달받고 자신의 일부 마이너에게 보낸다. 우리는 이러한 침투하는 마이너들과 풀에 의해 쓰이는 광산 파워를 침투율(infiltrating rate)이라고 부른다. 공격 풀의 침투중인 마이너가 부분적인 작업 증명을 제공하면 공격받은 풀이 자신의 파워를 추정하게 한다. 침투하는 마이너가 작업의 전체 증거를 제공하면, 공격 풀은 그것을 버린다. 

이 공격은 여러 가지 방법으로 풀의 수익에 영향을 준다. 희생자 풀의 유효 채굴율은 변경되지 않았지만 총 수익은 더 많은 광부들로 나뉘어진다. 마이너 중 일부는 BWH를 위해 사용되기 때문에 공격자의 채굴 파워은 줄어들지만 다른 풀에 침투하여 추가 수익을 얻는다. 마지막으로 시스템의 총 유효 채굴 파워가 감소되어 Bitcoin 프로토콜의 어려움이 줄어든다. 

이러한 모든 요인을 고려하여 풀은 다른 풀을 공격하여 수익을 늘릴 수 있다. 따라서 각 풀은 시스템의 다른 풀을 공격할지 여부와 침투 속도를 선택한다. 이것은 풀 게임을 발생 시킨다. 우리는이 게임을 지정하고 IV 장에서 초기 분석을 제공한다. 

섹션 V에서 하나만이 다른 하나를 공격 할 수있는 정확히 2 개의 풀의 시나리오를 분석한다. 여기서 공격자는 공격을 통해 수익을 늘릴 수 있다. 우리는 일반적인 경우에, 임의의 수의 풀과 함께, 풀 공격은 내쉬 균형이 아니라는 결론을 내린다. 

다음으로, 6 장에서는 각각이 다른 하나를 공격 할 수있는 2 개의 풀의 경우를 다룬다. 여기서 분석은 두 가지면에서 더 복잡해진다. 첫째, 각 풀의 수익은 침투하는 마이너를 통한 다른 풀의 수익에 영향을 미친다. 우리는 침투율의 정적인 선택에 대해 풀의 수익이 수렴한다는 것을 증명한다. 둘째, 한 풀이 다른 풀의 침투 속도를 변경하면 후자는 침투 속도를 변경하는 것을 선호할 수 있다. 따라서 게임 자체는 수렴하는 단계를 밟는다. 분석적으로 게임에 단일 내쉬 균형이 있고 다양한 풀 크기에 대한 평형 점을 수치 적으로 연구한다. 50 %보다 작은 풀의 경우, 평형 점에서 두 풀 모두 비평가 1 대 공격 전략에서 얻는 것보다 적게 얻다. 

풀은 언제 어디서나 공격을 시작하거나 중지 할 수 있기 때문에, 죄수의 딜레마와 비슷하게 광부의 딜레마의 사례로 모델링 할 수 있다. 공격은 각 반복에서 지배적 인 전략이지만 풀이 공격하지 않을 것에 동의 할 수 있다면 장기적으로 이점이 있다. 

마지막으로 섹션 VII에서 임의의 수의 동일한 풀의 경우를 다룬다. 각각의 풀이 서로를 공격하는 대칭 평형 점이 존재 한다. 소수계 2 풀 시나리오에서와 마찬가지로 평형 상태에서도 모든 풀은 두풀이 모두 공격하지 않았을 때보다 적게 받게 된다.

## 2.Preliminaries

---

Bitcoin은 분산되고 분산 된 디지털 통화입니다 [5, 4, 18, 3]. 클라이언트는 트랜잭션을 발행하여 시스템을 사용하며 시스템의 유일한 작업은 단일 원장에서 트랜잭션을 직렬화하고 이전 트랜잭션과의 충돌로 인해 직렬화 할 수없는 트랜잭션을 거부하는 것이다. Bitcoin 트랜잭션은 Bitcoin의 정당한 소유자 만이 전송할 수 있도록하는 암호화 기술로 보호된다. 

트랜잭션 원장은 데이터 구조 호출자 블록 체인에 저장 된다. 블록 체인은 Bitcoins에서의 노력으로 보완 된 광부 네트워크에 의해 유지 관리된다. 마이너는 블록 체인에 거래를 기록하는 것을 담당한다.

### A. 작업 증명의 수익
---

블록 체인은 트랜잭션을 블록 단위로 기록한다. 각 블록은 고유 한 ID와 선행 블록의 ID를 포함한다. 기원 블록이라고 불리는 첫 번째 블록은 프로토콜의 일부로 정의된다. 
 유효한 블록은 이전 블록의 해시, 현재 블록의 트랜잭션 해시 및 해당 블록을 생성하기위한 보상으로 간주되는 Bitcoin 주소를 포함한다. 

모든 광부는 일정량의 작업을했으며 블록을 다른 모든 광부에게 오버레이 네트워크를 통해 게시함으로써 (잠재적으로) 체인에 유효한 블록을 추가 할 수 있다. 마이너가 블록을 생성하면 Bitcoins을 사용하여 보상을 받는다. 이 보상에는 거래가 포함 된 사용자가 지불하는 거래 당 수수료와 시스템에 도입되는 Bitcoin의 양이 포함된다. 새로운 Bitcoins이 각 블록과 함께 생성되는 속도는 0으로 천천히 감소하도록 설계되었으며 2100 만 Bitcoins이 생성되면 0에 도달한다. 그렇다면 광부의 수익은 거래 수수료로만 발생한다. 

마이너가 해야하는 작업은 해시 함수, 특히 블록 헤더의 SHA-256의 SHA-256을 반복적으로 계산하는 것이다. 마이너가 이 작업을 수행한것을 나타 내기 위해 광부는 다음과 같은 확률적 증거를 제공한다. 생성 된 블록에는 임의의 값을 포함 할 수있는 nonce 필드가 있다. 마이너는 이 필드에 다른 값을 배치하고 각 값의 해시를 계산 한다. 해시의 결과가 목표 값보다 작 으면 넌스 (nonce)가 솔루션으로 간주되어 블록이 유효하다. 

따라서 하나의 해시를 찾으려는 횟수는 기하 분포에 따라 무작위로 결정된다. 각 시도는 목표 값에 의해 결정되는 성공 확률을 가진 베르누이 시도이다. 기존의 거대한 해싱 비율 및 목표 값에서 단일 해시를 찾는 시간은 지수 분포로 근사 할 수 있다. 광부가 솔루션을 찾는데 소요되는 평균 시간은 해시 비율이나 해시파워에 비례한다. Bitcoin 세대의 일정한 비율을 유지하고 서비스 거부 및 기타 공격에 대한 방어의 일부로 시스템은 블록 생성 속도를 표준화합니다. 이를 달성하기 위해 프로토콜은 최근 블록을 생성하는 데 필요한 시간에 따라 각 블록의 목표 값을 결정적으로 정의합니다. 목표 또는 난이도는 각 블록이 발견되는 평균 시간이 10 분이되도록 2016 블록마다 한 번 업데이트 된다. 

지수 분포는 기억이 없다는 것에 유의하십시오. 모든 광부가 블록 번호 b에 대해 채굴하면, 블록이 시각 t에서 발견되면, 모든 광부는 t에서 블록을 발견하는 확률 분포를 변경 되지 않고, t에서의 후속 블록 b + 1에 대해 채굴하기 시작한다. 그러므로, m_i의 해시파워를 가진 마이너가 다음 블록을 발견 할 확률은 m_i과 전체 해시 파워 m의 비율이 된다.

#### 포크

평균 채굴 간격은 10 분인 반면 오버레이 네트워크의 블록 전파는 수 초가 소요된다. 따라서 두 명의 광부가 경쟁 블록을 생성하는 것이 가능하며 두 블록 모두 이전 블록과 동일한 블록 뒤에 연결하게 된다. 시스템은 이러한 상황을 해결하는 메커니즘을 가지고있고 블록 중 하나가 삭제 된다. 그러나, 이러한 분기점은 드물며 60 블록마다 평균적으로 한번 발생 한다 [9]. 우리는 이런 fork를 간소화를 위해 무시한다. 분기점에서 버려진 블록의 선택은 무작위 적이기 때문에,이 사건을 블록을 발견 할 확률에 포함시킬 수 있고 대신 버려지지 않은 블록을 발견 할 확률을 고려할 수 있다.

### B. 풀

Bitcoin의 가치가 상승함에 따라, Bitcoin 광산은 빠르게 발전하는 산업이 되었다. 기술적 진보로 인해 해시 ASIC의 효율성이 더욱 높아졌으며 [26], 채굴 데이터 센터는 전 세계에 지어졌다 [21]. 채굴은 전용 최첨단 채굴 장치를 사용하는 것만으로 수익을 얻는다. 그렇지 않으면 에너지 비용이 예상 수익을 초과하게 된다. 

광산으로 인한 기대 수익은 사용 된 광산 굴착 장치의 전력에 비례하지만 작은 굴착 장치를 사용하는 한 명의 광부는 몇 년 동안 광산을 채굴 할 것 같지 않다 [25]. 결과적으로, 광부들은 종종 자체적으로 채굴 풀로 조직한다. 논리적으로 풀은 광부들이 광산을 성공적으로 채굴 할 때 수익을 공유하는 마이너 그룹이다. 발견된 각 블록에 대해 수익은 광산 권력에 비례하여 풀 구성원간에 분배된다. 따라서 풀 멤버의 예상 수익은 혼자서 채굴한 수익과 같다. 그러나 풀의 큰 힘으로 인해 훨씬 ​​더 높은 비율로 블록을 찾아 내고 수익을 얻는 빈도가 높아지기 때문에 일일 또는 주간 안정적인 소득이 보장 된다. 

실제적으로 대부분의 풀은 풀 관리자에 의해 제어 된다. 광부는 풀 관리자와 함께 등록한다. 풀 관리자는 작업을 생성하고 광부는 작업 증명으로 사용할 수있는 이러한 작업을 기반으로 솔루션을 검색합니다. 일단 솔루션을 찾으면 풀 관리자에게 보냅니다. 풀 관리자는 Bitcoin 시스템에서 단일 광부로 작동합니다. 광부 중 한 사람에게서 합법적 인 블록을 얻으면 게시합니다. 이 블록은 수익을 풀 관리자의 권한으로 이전합니다. 풀 관리자는 광산에 따라 광부들에게 수익을 분배합니다. 아키텍처는 그림 1에 나와 있습니다. 광부의 채굴 능력을 평가하기 위해 풀 관리자는 Bitcoin 시스템의 대상보다 훨씬 큰 (즉, 더 쉽습니다) 각 구성원에 대한 부분 대상을 설정합니다. 각 광부는 부분 목표에 따라 올바른 풀 관리자 블록을 보내야합니다. 부분 목표는 크게 선택되어 부분 솔루션이 관리자가 광부의 힘을 정확하게 견적하기에 충분할 정도로 자주 도착하지만 관리 비용을 줄이기는 힘들다. 풀은 종종 수익 중 적은 부분을 수수료로 청구 한다. 우리는 섹션 VIII에서 이러한 수수료가 우리 분석에 미치는 영향에 대해 논의한다. 

많은 풀이 열려 있고 관심있는 광부를 받아 들인다. 풀 인터페이스는 일반적으로 등록을위한 웹 인터페이스와 마이닝 소프트웨어를위한 광부 인터페이스를 포함합니다. 풀을 채굴하기 위해 광부는 웹 인터페이스에 등록하고 Bitcoin 주소를 제공하여 향후 수익 공유를 받고 광산 채굴 자격 증명을 풀에서받습니다. 그런 다음 채굴을 시작하는 채굴 장비에 그의 자격 증명과 수영장 주소를 제공합니다. 채굴 장비는 풀에서 작업을 획득하고 STRATUM 프로토콜 [28]을 사용하여 부분 및 전체 작업 증명을 보냅니다. 블록을 발견하면 풀 관리자는 작업량에 따라 광부의 계좌에 크레디트를 적용하고 요청시 또는 자동으로 앞서 언급 한 Bitcoin 주소로이 자금을 이체합니다.


#### 너무 큰 풀들

Bitcoin 시스템의 현실적인 시나리오에서 논쟁의 여지는 있지만 대부분의 풀은 광산 권력의 대부분을 제어하지 않는다. 그 이유는이 크기의 풀 관리자가 가장 긴 체인을 생성하고 다른 광부가 생성 한 블록을 무시함으로써 Bitcoin 시스템을 단독으로 제어 할 수 있기 때문이다. 시스템이이 상황에 도달하면 심각하게 불안정하다. [1] (그리고 [11]은 시스템이 더 작은 풀에서도 불안정하다고 경고합니다). 2014 년 6 월 어느 날 GHash.IO라는 단일 풀이 Bitcoin 주 체인의 블록 중 50 % 이상을 생성했습니다. Bitcoin 커뮤니티는 풀에서 백러쉬했습니다 (극도로 성공적이었던 것보다 더 나쁜 것은 없었습니다). GHash.IO는 상대적 채광력을 줄이고 공개적으로 50 % 한도에서 벗어나려고 노력했다.

### C. 블록 보류 

Classical Block Withholding [22]은 풀 멤버가 다른 풀 멤버에 대해 수행하는 공격입니다. 공격하는 마이너는 풀에 등록하고 정직하게 광산 채굴을 시작한다. 정기적으로 풀장의 부분 작업 증명을 보낸다. 그러나 공격하는 광부는 부분적인 작업 증명만 전송한다. 전체 작업 증명을 구성하는 전체 솔루션을 찾으면 풀을 폐기하여 풀의 총 수익을 줄입니다. 이 공격은 그림 2에 나와 있다. 

공격자는 풀의 유효 마이닝 능력을 변경하지 않으며 다른 풀의 수익에 직접적인 영향을주지 않습니다. 그러나 공격받은 풀은 수익을 공격자와 공유합니다. 따라서 동일한 광료가 더 많은 광부들에게 분배되기 때문에 각 광부는 더 적은 수입을 얻습니다. 블록의 해쉬가 목표보다 작은 논스 (nonce)이기 때문에, 특정 블록에 대해서만 작업 증명이 유효하다는 것을 기억하십시오. 공격하는 광부는 그것을 사용할 수 없습니다. 또한이 공격은 솔로 채광 또는 정직한 수영장 참여에 비해 공격자의 수익을 감소시킵니다. 다른 수영장 참여자와 마찬가지로 수익 감소로 고통을 겪고 수익은 시스템의 총 채광력 점유율 미만입니다. 따라서이 공격은 공격자가 부담해야하는 방해 행위에 대해서만 사용할 수 있습니다.
탐지 : 수영장은 정확한 원천 징수로 원천 징수 대상임을 감지 할 수 있지만, 등록 된 광부 중 어떤 것이 범인인지를 감지하지 못할 수도 있습니다. 그 이유는 의도적으로 작업의 어려움을 부분적으로 증명하는 것이 작업의 어려움을 증명하는 것보다 훨씬 쉽기 때문입니다. 수영장은 광부가 제공 한 부분적인 작업 증명 및 작업 증명의 비율에 따라 예상되는 광산 및 실제 광산을 추정 할 수 있습니다. 설정된 신뢰 구간 이상의 차이는 공격을 나타냅니다. 단일 광부가 공격하고 있는지 여부를 감지하려면 풀은 작업의 전체적인 증거를 제공하지 않는 사실과 부분적인 작업 증명을 기반으로 공격자의 예상 광산 권을 비교하는 비슷한 기술을 사용해야합니다. 침입자가 작은 채광력을 가진다면 부분적인 작업 증명을 자주 보내지 만 수영장은 매우 낮은 빈도로 완전한 작업 증명을 볼 것으로 예상됩니다. 따라서 공격을 나타내는 통계적으로 중요한 결과를 얻을 수 없습니다. 따라서 공격자는 하나의 큰 광부가 아닌 여러 개의 작은 광부를 사용하여 자주 교체 할 수 있습니다. 예를 들어, 예상되는 전체 작업 증명 빈도가 매년 인 광부들은 무시할 수없는 일일 수입을 볼 수 있습니다 (B25 / 12 / 31 ≈ B0.07). 월 단위로 교체하면 합법적 인 광부에 태그를 지정하지 않고도 수영장에서 자신을 공격자로 표시 할 수 없습니다.

## 모델과 기준 오퍼레이션

### A. 모델

이 시스템은 Bitcoin 네트워크와 노드로 구성되며 단계별로 진행된다. 각 노드는 고유 ID를 가지며 newTask (id) 명령을 호출하여 과제(task)를 생성 할 수 있다. 일은 주어진 ID와 연관 된다. 

노드는 work(task) 명령을 사용하여 단계 동안 과제에 대해 작업을 할 수 있다. 작업에서 작동하는 노드를 마이너라고 한다. 이 명령은 일련의 부분 작업 증명과 일련의 전체 작업 증명을 리턴합니다. 각 집합의 증명 수에는 푸 아송 분포, 큰 평균을 갖는 부분 증명 및 작은 평균을 포함한 전체 증명이 있습니다. 모든 노드는 동일한 힘을 가지므로 동일한 증명이 작업 증명을 생성합니다.
Bitcoin 네트워크는 완전한 작업 증명을 요구합니다. 이 보상을 획득하기 위해 기업은 획득 한 금액을 반환하는 publish (task, PoW) 명령을 호출하여 작업 태스크와 해당 작업 증명 (PoW)을 네트워크에 게시합니다. 보수는 작업과 관련된 ID로 이동합니다. Bitcoin 프로토콜은 각 단계에서 분배 된 평균 총 수익이 시스템 실행을 통해 일정하도록 수익을 표준화합니다. 노드는 payco (w, b) 명령을 사용하여 Bitcoin을 ID w 인 다른 노드로 전송할 수 있습니다. work () 명령 외에도 모든 로컬 작업, 지불, 메시지 전송, 전파 및 수신은 즉각적입니다. 우리는 광부의 수는 해상도 제한없이 광산을 임의로 분할 할 수있을 정도로 충분히 크다고 가정합니다. p가있는 풀의 수를 나타내며, m이있는 시스템에서 총 채광력의 수를 나타내고, 풀 i (1≤i≤p)에 충성하는 채광인을 mi로 나타냅니다. 우리는 풀에 대한 광부의 충성도가 시간이 지남에 따라 변하지 않는 준 정적 분석을 사용한다.

### B. 솔로 마이닝

노드는 doStep 함수의 구현(단일 단계에서의 루틴)에 의해 정의된다. 첫 번째 예로서 우리는 솔로 광부의 행동을 제공한다. 솔로 광부는 자체 태스크를 생성하고이를 지불하여 수익을 얻는 노드이다. 솔로 마이너의 알고리즘은 알고리즘 1에 나와 있다.


### C. 풀

풀은 코디네이터 역할을 하는 노드이며 여러 광부가 풀에 등록하여 작업 할 수 있다. 알고리즘 2에 도시된 풀 작업 w 광부에 대한 의사 코드 풀은 작업을 생성하고, 각 마이너에 작업을 전송한다.

 광부는 작업을 받고 단계 동안 작업합니다. 전체 작업 증명이 거의 발견되지 않기 때문에 수영장은 광부의 작업을 안정적으로 다른 방식으로 측정해야합니다. 풀 운영을 용이하게하기 위해 광부는 작업 증명뿐만 아니라 부분적인 작업 증명을 풀장으로 보낸다. 풀장은 모든 광부들의 작업 증명을 받고, 부분적인 작업 증명을 등록하고, 전체 증명을 발간합니다. 총 수익을 계산하고 광부들에게 배포합니다. 각 광부 현 단계에서의 성공, 풀받은 작업의 모든 부분 교정 작업 중 그 부분, 즉 교정 비율에 비례하여 수익을 받는다. 수영장은 (B, W) 임금과 수익의 점유율의 B 승 광부를 지불하고, 별도의 메시지와 함께 지불 광부를 알려줍니다. 풀은 수익의 수수료를 징수하지 않는다고 가정합니다. 풀비와 우리의 분석에 대한 그것의 함의는 VIII 장에서 논의된다.

### D. BWH miner

풀에 등록된 마이너는 고전적인 BWH 공격을 수행 할 수 있다. 이 BWH는 마치 풀에서 일하는 것처럼 작동하며 작업 증명을 보내지 않는다. 의사 코드는 알고리즘 2 에서처럼 표준 풀과 상호 작용하는 광부에 대해 알고리즘 3에 있습니다. 풀은 광부의 부분 증명을 등록하지만 알고리즘 2의 정직한 광부를 실행하는 광부와 알고리즘 3을 실행하는 보류 광부를 구분할 수 없습니다. 블록 원천 징수에 종사하는 광부가 풀의 전반적인 광산 채굴에 기여하지는 않지만, 보내온 부분적인 작업 증명에 따라 풀의 수익을 공유한다는 것입니다. 풀의 효율성을 판단하기 위해 우리는 광부 별 수익을 다음과 같이 정의합니다.

#### 정의 1 (수익 밀도).

풀의 수익 밀도는 풀 멤버가 얻는 평균 수익과 솔로 광부로 얻은 평균 수익 간의 비율이다. 솔로 마이너의 수익 밀도와 공격을받지 않은 풀을 사용하는 광부의 수익 밀도는 1 이다. 풀이 블록 원천 징수로 공격을 받으면 수익 밀도가 떨어진다. 

E. 연속 분석 

우리의 분석은 평균 수익이 될 것이므로 전체 확률 및 부분 확률을 확률에 따라 연속적인 결정적 크기로 간주 할 것이다. 따라서 work () 명령은 작업 증명의 결정적 부분을 반환한다.

## IV. THE POOL GAME

#### A. The Pool Block Withholding Attack

마이너가 풀 j에서 blockholding를 수행 할 수있는 것처럼, 풀(pool)은 마이너 중 일부를 풀 j에 침투시키고 j에 블록 원천 BWH공격을 수행 할 수 있다. 단계 t에서 그러한 침투하는 마이너의 수를 xi, j (t)로 나타 낸다. 이 경우, 침투하는 광부는 풀 j의 수익에서 그들의 점유율을 얻고 이를 풀 i로 다시 전송 한다. i에서 j까지의 침입자와 풀에 정직하게있는 마이너들도 풀에 충실합니다. 풀 (Pool) 나는 부분적인 광업 증명에 따라, 광산에서의 수익과 침입자로부터의 수익을 모든 등록 된 광부들에게 균등하게 배분한다. 

bwh의 수도 코드는 알고리즘 4에 나와 있다. 풀의 마이너는 변경을 무시하고 알고리즘은 알고리즘 2의 알고리즘과 동일하다

#### B. Block Withholding Recycling

우리는 침투하는 광부가 공격자에게 충실하다고 가정 한다. 그러나 풀의 일부 구성원은 불충한 침입자 일 수 있습니다. 예를 들어, 풀 1은 충성스런 마이너를 사용하여 풀 2에 침투 할 수 있으며 풀2는 마이너가 충성한다고 생각하여 수영장 1을 공격 할 수 있다. 

불충 한 광부를 보내 다른 수영장에서 원천 징수를 차단하면 공격자가 중대한 위험. 위에서 설명한 시나리오에서 풀 2의 관점. 불충 한 광부는 블록 1을 보류하는 대신 수영장 1에 대해 정직한 광산업을 수행 할 수 있으며 수영장 2에 수익을 반환하지 않을 수 있다. 또한 풀 2의 수익 (광부가 충성도가 있다고 생각하는)을 분배하여 제공합니다 이러한 위험을 피하기 위해 풀에는 검증 된 광부가 충 분한 광부가 필요하다. Bitcoin에서 이것은 풀 소유자가 자신의 광부를 가지고있는 일반적인 경우에서 발생한다.

#### C. 수익 수렴

 풀 j는 단계의 끝에서 풀 i의 침입자에게 수익을 보낸다. 이 수익은 prevRoundInfiltrationRevenue 변수로 후속 단계 시작시 풀 i에서 계산된다. 각 풀이 다음에 침투하는 길이의 풀 체인이있는 경우, 침투로 인한 수익이 각 홉을 취하기 위해 한 걸음 씩이기 때문에 풀 수익은 일정하지 않는다. l_max가 시스템에서 가장 긴 체인이면,l_max 스탭 후에 수익은 안정되고 일정하게 유지된다. 침투 그래프에 루프가 있으면 시스템은 특정 수익으로 수렴한다.



#### D. 풀 게임

풀 게임 풀에서는 수익을 극대화하기 위해 다른 풀의 침입 비율을 최적화하려고 한다. 광부의 총 수와 각 수영장에 충성하는 광부의 수는 게임 내내 일정하다.
시간은 라운드 진행된다. s를 수렴 한계로 근사 할 수있을만큼 충분히 큰 일정한 정수로 보자. 각 라운드에서 시스템은 단계를 수행하고 라운드 로빈 정책으로 선택된 단일 풀은 다른 모든 풀의 침투 비율을 변경할 수 있습니다. 각 단계의 총 수익은 1 / s로 정규화되므로 라운드 당 수익은 1입니다.
